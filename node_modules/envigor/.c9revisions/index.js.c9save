{"ts":1369519375308,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var env = process.env;\nmodule.exports = function (opts) {\n  var cfg = {};\n\n  cfg.port = env.PORT;\n\n  // MongoDB\n  if (env.MONGOLAB_URI) {\n    cfg.mongolab = {url: env.MONGOLAB_URI, uri: env.MONGOLAB_URI};\n  }\n\n  if (env.MONGOHQ_URL) {\n    cfg.mongohq = {url: env.MONGOHQ_URL};\n  }\n\n  if (env.MONGODB_URL || env.MONGOLAB_URI || env.MONGOHQ_URL) {\n    cfg.mongodb = {\n      url: env.MONGODB_URL || env.MONGOLAB_URI || env.MONGOHQ_URL,\n      service: (cfg.mongolab && 'mongolab') || (cfg.mongohq && 'mongohq')\n    };\n  }\n\n  // Facebook\n  if (env.FACEBOOK_APP_ID || env.FACEBOOK_SECRET || env.FACEBOOK_APP_SECRET) {\n    cfg.facebook = {\n      appId: env.FACEBOOK_APP_ID,\n      secret: env.FACEBOOK_SECRET || env.FACEBOOK_APP_SECRET\n    };\n  }\n\n  // Amazon Web Services\n  if (env.AWS_ACCESS_KEY_ID || env.AWS_ACCESS_KEY || env.AWS_SECRET\n    || env.AWS_SECRET_KEY || env.AWS_SECRET_ACCESS_KEY) {\n      \n    cfg.aws = {\n      accessKey: env.AWS_ACCESS_KEY_ID || env.AWS_ACCESS_KEY,\n      secret: env.AWS_SECRET || env.AWS_SECRET_KEY\n        || env.AWS_SECRET_ACCESS_KEY\n    };\n  }\n\n  // Amazon S3\n  if (env.S3_ACCESS_KEY || env.S3_KEY || env.S3_BUCKET || env.S3_BUCKET_NAME\n    || env.S3_SECRET || env.S3_SECRET_KEY || env.S3_ENDPOINT\n    || cfg.aws) {\n\n    cfg.s3 = {\n      accessKey: env.S3_ACCESS_KEY || env.S3_KEY || aws_access_key,\n      secret: env.S3_SECRET || env.S3_SECRET_KEY || aws_secret,\n      bucket: env.S3_BUCKET || env.S3_BUCKET_NAME,\n      endpoint: env.S3_ENDPOINT || 's3.amazonaws.com'\n    };\n  }\n\n  // SMTP\n  if (env.SMTP_USERNAME || env.SMTP_PASSWORD || env.SMTP_HOST || env.SMTP_PORT\n    || env.MANDRILL_USERNAME || env.MANDRILL_APIKEY\n    || env.POSTMARK_API_KEY || env.SENDGRID_USERNAME || env.SENDGRID_PASSWORD\n    || env.MAILGUN_SMTP_LOGIN || env.MAILGUN_SMTP_PASSWORD\n    || env.MAILGUN_SMTP_SERVER || env.MAILGUN_SMTP_PORT) {\n\n    var mandrill = env.MANDRILL_USERNAME || env.MANDRILL_APIKEY;\n    var postmark = env.POSTMARK_API_KEY;\n    var sendgrid = env.SENDGRID_USERNAME || env.SENDGRID_PASSWORD;\n    var mailgun = env.MAILGUN_SMTP_LOGIN || env.MAILGUN_SMTP_PASSWORD\n      || env.MAILGUN_SMTP_SERVER || env.MAILGUN_SMTP_PORT;\n\n    cfg.smtp = {};\n\n    cfg.smtp.username = env.SMTP_USERNAME || env.MANDRILL_USERNAME\n      || env.POSTMARK_API_KEY || env.SENDGRID_USERNAME\n      || env.MAILGUN_SMTP_LOGIN;\n    cfg.smtp.user = env.smtp.username;\n    cfg.smtp.password = env.SMTP_PASSWORD || env.MANDRILL_APIKEY\n      || env.POSTMARK_API_KEY || env.SENDGRID_PASSWORD\n      || env.MAILGUN_SMTP_PASSWORD;\n    cfg.smtp.pass = env.smtp.password;\n    cfg.smtp.service = env.SMTP_SERVICE || (mandrill && 'mandrill')\n      || (postmark && 'postmark') || (sendgrid && 'sendgrid')\n      || (mailgun && 'mailgun');\n\n    if (mandrill) {\n      cfg.mandrill = {\n        username: env.MANDRILL_USERNAME,\n        apiKey: env.MANDRILL_APIKEY\n      };\n    }\n\n    if (postmark) {\n      cfg.postmark = {\n        apiKey: env.POSTMARK_API_KEY,\n        inboundAddress: env.POSTMARK_INBOUND_ADDRESS\n      };\n    }\n\n    if (sendgrid) {\n      cfg.sendgrid = {\n        username: env.SENDGRID_USERNAME,\n        password: env.SENDGRID_PASSWORD\n      };\n    }\n\n    if (mailgun) {\n      cfg.mailgun = {\n        apiKey: env.MAILGUN_API_KEY,\n        smtp: {\n          username: env.MAILGUN_SMTP_LOGIN,\n          user: env.MAILGUN_SMTP_LOGIN,\n          login: env.MAILGUN_SMTP_LOGIN,\n          password: env.MAILGUN_SMTP_PASSWORD,\n          pass: env.MAILGUN_SMTP_PASSWORD,\n          hostname: env.MAILGUN_SMTP_SERVER,\n          host: env.MAILGUN_SMTP_SERVER,\n          server: env.MAILGUN_SMTP_SERVER,\n          port: env.MAILGUN_SMTP_PORT\n        }\n      };\n    }\n  }\n\n  return cfg;\n};\n"]],"start1":0,"start2":0,"length1":0,"length2":3675}]],"length":3675}
{"ts":1369519506985,"patch":[[{"diffs":[[0,"_KEY"],[-1," || aws_"],[1,"\n        || (cfg.aws && cfg.aws."],[0,"access"],[-1,"_k"],[1,"K"],[0,"ey"],[1,")"],[0,",\n  "]],"start1":1307,"start2":1307,"length1":26,"length2":50},{"diffs":[[0,"_KEY"],[-1," || aws_"],[1,"\n        || (cfg.aws && cfg.aws."],[0,"secret"],[1,")"],[0,",\n  "]],"start1":1399,"start2":1399,"length1":22,"length2":47},{"diffs":[[0,"}\n\n  // "],[-1,"SMTP"],[1,"Mail services"],[0,"\n  if (e"]],"start1":1558,"start2":1558,"length1":20,"length2":29},{"diffs":[[0,"s\n  if (env."],[-1,"SMTP"],[1,"MANDRILL"],[0,"_USERNAME ||"]],"start1":1578,"start2":1578,"length1":28,"length2":32},{"diffs":[[0,"env."],[-1,"SMTP_PASSWORD || env.SMTP_HOST || env.SMTP_PORT\n    ||"],[1,"MANDRILL_APIKEY) {\n    cfg.mandrill = {\n      username:"],[0," env"]],"start1":1611,"start2":1611,"length1":62,"length2":63},{"diffs":[[0,"ANDRILL_USERNAME"],[-1," ||"],[1,",\n      apiKey:"],[0," env.MANDRILL_AP"]],"start1":1676,"start2":1676,"length1":35,"length2":47},{"diffs":[[0,"_APIKEY\n    "],[-1,"|| "],[1,"};\n  }\n  \n  if ("],[0,"env.POSTMARK"]],"start1":1720,"start2":1720,"length1":27,"length2":40},{"diffs":[[0,"MARK_API_KEY || "],[1,"env.POSTMARK_INBOUND_ADDRESS) {\n    cfg.postmark = {\n      apiKey: env.POSTMARK_API_KEY,\n      inboundAddress: env.POSTMARK_INBOUND_ADDRESS\n    };\n  }\n  \n  if ("],[0,"env.SENDGRID_USE"]],"start1":1756,"start2":1756,"length1":32,"length2":192},{"diffs":[[0,"RID_PASSWORD"],[1,") {"],[0,"\n    "],[-1,"|| "],[1,"cfg.sendgrid = {\n      username: env.SENDGRID_USERNAME,\n      password: env.SENDGRID_PASSWORD\n    };\n  }\n\n  if ("],[0,"env.MAILGUN_"]],"start1":1966,"start2":1966,"length1":32,"length2":144},{"diffs":[[0,") {\n"],[-1,"\n"],[0,"    "],[-1,"var mandrill = env.MANDRILL_USERNAME || env.MANDRILL_APIKEY;\n    var postmark = env.POSTMARK_API_KEY"],[1,"  \n    cfg.mailgun = {\n      apiKey: env.MAILGUN_API_KEY,\n      smtp: {\n        username: env.MAILGUN_SMTP_LOGIN,\n        user: env.MAILGUN_SMTP_LOGIN,\n        login: env.MAILGUN_SMTP_LOGIN,\n        password: env.MAILGUN_SMTP_PASSWORD,\n        pass: env.MAILGUN_SMTP_PASSWORD,\n        hostname: env.MAILGUN_SMTP_SERVER,\n        host: env.MAILGUN_SMTP_SERVER,\n        server: env.MAILGUN_SMTP_SERVER,\n        port: env.MAILGUN_SMTP_PORT\n      }\n    };\n  }\n    \n  // SMTP\n  if (env.SMTP_USERNAME || env.SMTP_PASSWORD || env.SMTP_HOST || env.SMTP_PORT\n    || cfg.mandrill || cfg.postmark || cfg.sendgrid || cfg.mailgun) {\n\n    var postmark = "],[0,";\n  "]],"start1":2205,"start2":2205,"length1":113,"length2":651},{"diffs":[[0,");\n\n"],[-1,"    if (mandrill) {\n      cfg.mandrill = {\n        username: env.MANDRILL_USERNAME,\n        apiKey: env.MANDRILL_APIKEY\n      };\n    }\n\n    if (postmark) {\n      cfg.postmark = {\n        apiKey: env.POSTMARK_API_KEY,\n        inboundAddress: env.POSTMARK_INBOUND_ADDRESS\n      };\n    }\n\n    if (sendgrid) {\n      cfg.sendgrid = {\n        username: env.SENDGRID_USERNAME,\n        password: env.SENDGRID_PASSWORD\n      };\n    }\n\n    if (mailgun) {\n      cfg.mailgun = {\n        apiKey: env.MAILGUN_API_KEY,\n        smtp: {\n          username: env.MAILGUN_SMTP_LOGIN,\n          user: env.MAILGUN_SMTP_LOGIN,\n          login: env.MAILGUN_SMTP_LOGIN,\n          password: env.MAILGUN_SMTP_PASSWORD,\n          pass: env.MAILGUN_SMTP_PASSWORD,\n          hostname: env.MAILGUN_SMTP_SERVER,\n          host: env.MAILGUN_SMTP_SERVER,\n          server: env.MAILGUN_SMTP_SERVER,\n          port: env.MAILGUN_SMTP_PORT\n        }\n      };\n    }"],[1,"\n"],[0,"\n  }"]],"start1":3620,"start2":3620,"length1":934,"length2":9}]],"length":3648,"saved":false}
{"ts":1369519512470,"patch":[[{"diffs":[[0,"CESS_KEY) {\n"],[-1,"      "],[0,"\n"],[1,""],[0,"    cfg.aws "]],"start1":879,"start2":879,"length1":31,"length2":25},{"diffs":[[0,"IKEY\n    };\n  }\n"],[-1,"  "],[0,"\n"],[1,""],[0,"  if (env.POSTMA"]],"start1":1717,"start2":1717,"length1":35,"length2":33},{"diffs":[[0," };\n  }\n"],[-1,"  "],[0,"\n"],[1,""],[0,"  if (en"]],"start1":1907,"start2":1907,"length1":19,"length2":17},{"diffs":[[0,") {\n"],[-1,"      "],[0,"\n"],[1,""],[0,"    "]],"start1":2195,"start2":2195,"length1":15,"length2":9},{"diffs":[[0," };\n  }\n"],[-1,"    "],[0,"\n  // SM"]],"start1":2644,"start2":2644,"length1":20,"length2":16}]],"length":3628,"saved":false}
{"ts":1369519575395,"patch":[[{"diffs":[[0," {\n\n"],[-1,"    var postmark = ;\n    var sendgrid = env.SENDGRID_USERNAME || env.SENDGRID_PASSWORD;\n    var mailgun = env.MAILGUN_SMTP_LOGIN || env.MAILGUN_SMTP_PASSWORD\n      || env.MAILGUN_SMTP_SERVER || env.MAILGUN_SMTP_PORT;\n\n"],[0,"    "]],"start1":2809,"start2":2809,"length1":226,"length2":8},{"diffs":[[0,"ICE || ("],[1,"cfg."],[0,"mandrill"]],"start1":3258,"start2":3258,"length1":16,"length2":20},{"diffs":[[0,"    || ("],[1,"cfg."],[0,"postmark"]],"start1":3296,"start2":3296,"length1":16,"length2":20},{"diffs":[[0,"k') || ("],[1,"cfg."],[0,"sendgrid"]],"start1":3328,"start2":3328,"length1":16,"length2":20},{"diffs":[[0,"    || ("],[1,"cfg."],[0,"mailgun "]],"start1":3366,"start2":3366,"length1":16,"length2":20}]],"length":3426,"saved":false}
{"ts":1369519584353,"patch":[[{"diffs":[[0,"lgun');\n"],[-1,"\n\n\n"],[0,"  }\n\n  r"]],"start1":3393,"start2":3393,"length1":19,"length2":16}]],"length":3423,"saved":false}
{"ts":1369519722418,"patch":[[{"diffs":[[0," = {"],[-1,"};\n"],[0,"\n    "],[-1,"cfg.smtp."],[1,"  "],[0,"username"],[-1," ="],[1,":"],[0," env"]],"start1":2825,"start2":2825,"length1":35,"length2":24},{"diffs":[[0,"NDRILL_USERNAME\n"],[1,"  "],[0,"      || env.POS"]],"start1":2873,"start2":2873,"length1":32,"length2":34},{"diffs":[[0,"ID_USERNAME\n"],[1,"  "],[0,"      || env"]],"start1":2934,"start2":2934,"length1":24,"length2":26},{"diffs":[[0,"OGIN"],[-1,";"],[1,","],[0,"\n    "],[-1,"cfg.smtp.user = env.smtp.username;\n    cfg.smtp."],[1,"  "],[0,"password"],[-1," ="],[1,":"],[0," env"]],"start1":2975,"start2":2975,"length1":72,"length2":25},{"diffs":[[0,"RILL_APIKEY\n"],[1,"  "],[0,"      || env"]],"start1":3026,"start2":3026,"length1":24,"length2":26},{"diffs":[[0,"SWORD\n      "],[1,"  "],[0,"|| env.MAILG"]],"start1":3089,"start2":3089,"length1":24,"length2":26},{"diffs":[[0,"WORD"],[-1,";"],[1,","],[0,"\n    "],[-1,"cfg.smtp.pass = env.smtp.password;\n    cfg.smtp."],[1,"  "],[0,"service"],[-1," ="],[1,":"],[0," env"]],"start1":3127,"start2":3127,"length1":71,"length2":24},{"diffs":[[0,"ailgun')"],[1,"\n    };\n\n    cfg.smtp.user = cfg.smtp.username;\n    cfg.smtp.pass = cfg.smtp.password"],[0,";\n  }\n\n "]],"start1":3294,"start2":3294,"length1":16,"length2":101}]],"length":3411,"saved":false}
{"ts":1369519730730,"patch":[[{"diffs":[[0,"andrill')\n      "],[1,"  "],[0,"|| (cfg.postmark"]],"start1":3187,"start2":3187,"length1":32,"length2":34},{"diffs":[[0,"dgrid')\n"],[1,"  "],[0,"      ||"]],"start1":3261,"start2":3261,"length1":16,"length2":18}]],"length":3415,"saved":false}
{"ts":1369519807027,"patch":[[{"diffs":[[0,"service:"],[1," env.MONGODB_SERVICE ||"],[0," (cfg.mo"]],"start1":439,"start2":439,"length1":16,"length2":39},{"diffs":[[0,"ngolab')"],[1,"\n       "],[0," || (cfg"]],"start1":491,"start2":491,"length1":16,"length2":24},{"diffs":[[0,"ongohq')"],[1,";"],[0,"\n    };\n"]],"start1":529,"start2":529,"length1":16,"length2":17}]],"length":3447,"saved":false}
{"ts":1369519810400,"patch":[[{"diffs":[[0,"ongohq')"],[-1,";"],[0,"\n    };\n"]],"start1":529,"start2":529,"length1":17,"length2":16}]],"length":3446,"saved":false}
{"ts":1369520917656,"patch":[[{"diffs":[[0,"_PASSWORD ||"],[1," env.SMTP_SERVER\n    || env.SMTP_HOSTNAME ||"],[0," env.SMTP_HO"]],"start1":2729,"start2":2729,"length1":24,"length2":68},{"diffs":[[0,"v.SMTP_PORT\n"],[-1,""],[0,"    || cfg.m"]],"start1":2805,"start2":2805,"length1":24,"length2":24},{"diffs":[[0,"P_PASSWORD,\n"],[1,"      hostname: env.SMTP_SERVER || env.SMTP_HOSTNAME || env.SMTP_HOST\n        || (cfg.mandrill && 'smtp.mandrillapp.com')\n        || (cfg.postmark && 'smtp.postmarkapp.com')\n        || (cfg.sendgrid && 'smtp.sendgrid.net')\n        || env.MAILGUN_SMTP_SERVER || (cfg.mailgun && 'smtp.mailgun.org'),\n      port: env.SMTP_PORT || (cfg.mandrill && '587')\n        || (cfg.postmark && '2525') // assuming 25 will have problems\n        || (cfg.sendgrid && '587')\n        || env.MAILGUN_SMTP_PORT || (cfg.mailgun && '587'),\n"],[0,"      servic"]],"start1":3196,"start2":3196,"length1":24,"length2":540},{"diffs":[[0,"ername;\n"],[-1,""],[0,"    cfg."]],"start1":3937,"start2":3937,"length1":16,"length2":16},{"diffs":[[0,"ssword;\n"],[1,"    cfg.smtp.host = cfg.smtp.hostname;\n    cfg.smtp.server = cfg.smtp.hostname;\n"],[0,"  }\n\n  r"]],"start1":3976,"start2":3976,"length1":16,"length2":96}]],"length":4086,"saved":false}
{"ts":1369521357963,"patch":[[{"diffs":[[0,"NAME"],[-1," || env.MANDRILL_USERNAME\n        || env.POSTMARK_API_KEY || env.SENDGRID_USERNAME\n        || env.MAILGUN_SMTP_LOGIN,\n      password: env.SMTP_PASSWORD || env.MANDRILL_APIKEY\n        || env.POSTMARK_API_KEY || env.SENDGRID_PASSWORD\n        || env.MAILGUN_SMTP_PASSWORD"],[1,"\n        || (cfg.mandrill && cfg.mandrill.username)\n        || (cfg.postmark && cfg.postmark.apiKey)\n        || (cfg.sendgrid && cfg.sendgrid.username)\n        || (cfg.mailgun && cfg.mailgun.smtp.username),\n      password: env.SMTP_PASSWORD\n        || (cfg.mandrill && cfg.mandrill.apiKey)\n        || (cfg.postmark && cfg.postmark.apiKey)\n        || (cfg.sendgrid && cfg.sendgrid.password)\n        || (cfg.mailgun && cfg.mailgun.smtp.password)"],[0,",\n  "]],"start1":2934,"start2":2934,"length1":276,"length2":451},{"diffs":[[0," || "],[-1,"env.MAILGUN_SMTP_SERVER || (cfg.mailgun &&"],[1,"(cfg.mailgun && (cfg.mailgun.smtp.hostname ||"],[0," 'sm"]],"start1":3613,"start2":3613,"length1":50,"length2":53},{"diffs":[[0,"un.org')"],[1,")"],[0,",\n      "]],"start1":3674,"start2":3674,"length1":16,"length2":17},{"diffs":[[0,"t: env.SMTP_PORT"],[1,"\n       "],[0," || (cfg.mandril"]],"start1":3694,"start2":3694,"length1":32,"length2":40},{"diffs":[[0," || "],[-1,"env.MAILGUN_SMTP_PORT || (cfg.mailgun &&"],[1,"(cfg.mailgun && (cfg.mailgun.smtp.port ||"],[0," '587')"],[1,")"],[0,",\n  "]],"start1":3858,"start2":3858,"length1":55,"length2":57},{"diffs":[[0,"env.SMTP_SERVICE"],[1,"\n       "],[0," || (cfg.mandril"]],"start1":3928,"start2":3928,"length1":32,"length2":40},{"diffs":[[0,"stmark')"],[1,"\n       "],[0," || (cfg"]],"start1":4016,"start2":4016,"length1":16,"length2":24}]],"length":4291,"saved":false}
{"ts":1369521489898,"patch":[[{"diffs":[[0,"ONGO"],[-1,"LAB_URI || env.MONGOHQ_URL"],[1,"DB_SERVICE\n    || cfg.mongolab || cfg.mongohq "],[0,") {\n"],[1,"\n"],[0,"    "]],"start1":312,"start2":312,"length1":38,"length2":59},{"diffs":[[0,"_URL"],[-1," || env.MONGOLAB_URI || env.MONGOHQ_URL"],[1,"\n        || (cfg.mongolab && cfg.mongolab.url)\n        || (cfg.mongohq && cfg.mongohq.url)"],[0,",\n  "]],"start1":409,"start2":409,"length1":47,"length2":98},{"diffs":[[0,"nv.SMTP_PORT"],[1," || env.SMTP_SERVICE"],[0,"\n    || cfg."]],"start1":2876,"start2":2876,"length1":24,"length2":44}]],"length":4383,"saved":false}
{"ts":1369522304588,"patch":[[{"diffs":[[0,".MONGODB_SERVICE"],[-1,"\n   "],[0," || cfg.mongolab"]],"start1":310,"start2":310,"length1":36,"length2":32},{"diffs":[[0,".mongohq"],[-1," "],[0,") {\n\n   "]],"start1":349,"start2":349,"length1":17,"length2":16}]],"length":4378,"saved":false}
{"ts":1369625422470,"patch":[[{"diffs":[[0,"ssword;\n"],[1,"    cfg.smtp.auth = {user: cfg.smtp.username, pass: cfg.smtp.password};\n"],[0,"    cfg."]],"start1":4268,"start2":4268,"length1":16,"length2":88}]],"length":4450,"saved":false}
{"ts":1369626878513,"patch":[[{"diffs":[[0,"P_SECRET\n    };\n"],[1,"    cfg.facebook.clientID = cfg.facebook.appId;\n    cfg.facebook.clientSecret = cfg.facebook.secret;\n"],[0,"  }\n\n  // Amazon"]],"start1":817,"start2":817,"length1":32,"length2":133}]],"length":4551,"saved":false}
